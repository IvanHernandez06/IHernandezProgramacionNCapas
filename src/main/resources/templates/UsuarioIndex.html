<html xmlns:th="http://www.thymeleaf.org"


      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"


      layout:decorate="~{layout}">




    <body layout:fragment="body">
        <div class="container">


            <form method="post" th:action="@{/Usuario}" th:object="${usuarioBusqueda}">
                <form method="post" th:action="@{/Usuario}" th:object="${usuarioBusqueda}">
                    <div class="row g-3"> <!-- g-3 agrega espacio entre columnas -->

                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-text">@</span>
                                <input type="text" class="form-control" placeholder="Nombre" th:field="*{Nombre}">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-text">@</span>
                                <input type="text" class="form-control" placeholder="Apellido Paterno" th:field="*{ApellidoPaterno}">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-text">@</span>
                                <input type="text" class="form-control" placeholder="Apellido Materno" th:field="*{ApellidoMaterno}">
                            </div>
                        </div>

                        <div class="col-12 text-end">
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>

                    </div>
                </form>



                <div style="position: relative; height: 20px; left: 1300;margin-top: 25px;">  
                    <a th:href="@{/Usuario/action/{idUsuario}(idUsuario=0)}">
                        <i class="bi bi-person-add"  style="font-size: 4rem;color: black;"></i>
                    </a>

                </div>
                <table class="table table-hover">
                    <thead class="table-dark">
                    <th class="col-1"></th>
                    <th class="col-1">Image</th>
                    <th class="col-2">Nombre</th>
                    <th class="col-5">Contacto</th>
                    <th class="col-4">Dirección</th>
                    </thead>
                    <tbody>
                        <tr  th:each="usuarios : ${usuarios}">
                            <td>
                                
                                
                                <a th:href="@{/Usuario/action/{idUsuario}(idUsuario = ${usuarios.idUsuario})}"
                                   class="btn btn-warning"><i class="bi bi-pencil-square"></i></a>

                                <a th:href="@{/Usuario/deleteUser/{idUsuario}(idUsuario = ${usuarios.idUsuario})}"
                                   class="btn btn-danger">
                                    
                                    <i class="bi bi-trash3-fill"></i></a></td>


                            <td>

                                <img th:src="${usuarios.Imagen != null} 
                                     ? 'data:image/png;base64,' + ${usuarios.Imagen} 
                                     : 'https://as2.ftcdn.net/v2/jpg/05/89/93/27/1000_F_589932782_vQAEAZhHnq1QCGu5ikwrYaQD0Mmurm0N.jpg'"
                                     alt="Foto de usuario" width="80" height="80" style="border-radius: 50%;" />
                            </td>


                            <td th:text="|${usuarios.Nombre} ${usuarios.ApellidoPaterno} ${usuarios.ApellidoMaterno}|"></td>
                            <td th:utext="|Email: ${usuarios.Email} <p>  
                                Fecha de Nacimiento: ${#dates.format(usuarios.fechaNacimiento, 'dd/MM/yyyy')}<p>
                                Telefono: ${usuarios.Telefono}  <p>
                                Celular: ${usuarios.Celular} <p>
                                Curp: ${usuarios.Curp}
                                |"></td>

                            <td>
                                <div th:if="${usuarios.Direccion != null and !usuarios.Direccion.isEmpty()}">
                                    <div th:each="direccion : ${usuarios.Direccion}" class="mb-2 border-bottom pb-2">
                                        <div>Calle: <span th:text="${direccion.calle}"></span></div>
                                        <div>NumInterior: <span th:text="${direccion.NumInterior}"></span></div>
                                        <div>NumExterior: <span th:text="${direccion.NumExterior}"></span></div>
                                        <div>Colonia: <span th:text="${direccion.Colonia.nombre}"></span></div>
                                        <div>Código Postal: <span th:text="${direccion.Colonia.CodigoPostal}"></span></div>
                                        <div>Municipio: <span th:text="${direccion.Colonia.Municipio.Nombre}"></span></div>
                                        <div>Estado: <span th:text="${direccion.Colonia.Municipio.Estado.Nombre}"></span></div>
                                        <div>País: <span th:text="${direccion.Colonia.Municipio.Estado.Pais.Nombre}"></span></div>
                                    </div>
                                </div>
                                <div th:if="${usuarios.Direccion == null or usuarios.Direccion.isEmpty()}">
                                    Sin dirección registrada
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

        </div>
    </body>
</html>
